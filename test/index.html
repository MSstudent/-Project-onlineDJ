<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="js/buffer-loader.js"></script>
    <script>
        var context;
        var bufferLoader;
        var source;
        window.addEventListener('load', init, false);

        function init(){
            context = new webkitAudioContext();

            bufferLoader = new BufferLoader(
                context,
                [
                    'music/1.mp3'
                ],
                finishedLoading
            );

            bufferLoader.load();
        }

        function finishedLoading(bufferList){
            var source = context.createBufferSource();
            source.buffer = bufferList[0];
            source.connect(context, destination);
            source.noteOn(0);
        }


        function playSound(buffer) {
            var source = context.createBufferSource(); // 创建一个声音源
            source.buffer = buffer;                    // 告诉该源播放何物
            source.connect(context.destination);       //将该源与硬件相连
            source.noteOn(0);                          // 现在播放该实例
        }
    </script>
</head>
<body>

</body>
</html>